<!DOCTYPE html>
<html>
  <head>
    <title>Marking Attendance</title>
    <script>
      async function submitAttendance() {
        const ua = navigator.userAgent;

        try {
          // Fetch public IP from ipify
          const response = await fetch('https://api.ipify.org?format=json');
          const data = await response.json();
          const ip = data.ip;

          // ‚úÖ Paste your actual Google Apps Script Web App URL below
          const scriptURL = 'https://script.google.com/macros/s/AKfycbyGQSNk3z5bTj9uOUTmOSehPkKDjAHbMGpmmJjjiYzMfIvpX2Xgz6KoABne9MJ0ZiSEaQ/exec';

          // Construct the redirect URL with query parameters
          const redirectURL = ${scriptURL}?ua=${encodeURIComponent(ua)}&ip=${ip};

          // Redirect to Google Script to log attendance
          window.location.replace(redirectURL);

        } catch (error) {
          document.body.innerHTML = "<h2>‚ùå Failed to fetch IP or submit attendance.</h2>";
          console.error(error);
        }
      }
    </script>
  </head>
  <body onload="submitAttendance()">
    <h2>üìç Marking your attendance...</h2>
    <p>Please wait...</p>
 ¬†</body>
</html>
